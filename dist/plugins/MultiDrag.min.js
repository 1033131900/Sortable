/*! SortableJS MultiDrag Plugin 1.9.0 - MIT | git://github.com/SortableJS/Sortable.git */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).MultiDrag=t()}(this,function(){"use strict";function e(e){return!!navigator.userAgent.match(e)}var w=e(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),C=e(/Edge/i),o=(e(/firefox/i),e(/safari/i)&&!e(/chrome/i)&&e(/android/i),e(/iP(ad|od|hone)/i),{capture:!1,passive:!1});function n(e,t,n){e.addEventListener(t,n,!w&&o)}function r(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function E(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(R_SPACE," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(R_SPACE," ")}}function h(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=n+("string"==typeof n?"":"px")}}function m(e,t){var n="";do{var o=h(e,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!t&&(e=e.parentNode));return window.DOMMatrix?new DOMMatrix(n):window.WebKitCSSMatrix?new WebKitCSSMatrix(n):window.CSSMatrix?new CSSMatrix(n):void 0}function S(e,t,n,o,i){if(e.getBoundingClientRect||e===window){var r,a,l,s,d,u,c;if(c=e!==window&&e!==(w?document.documentElement:document.scrollingElement)?(a=(r=e.getBoundingClientRect()).top,l=r.left,s=r.bottom,d=r.right,u=r.height,r.width):(l=a=0,s=window.innerHeight,d=window.innerWidth,u=window.innerHeight,window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!w))do{if(i&&i.getBoundingClientRect&&("none"!==h(i,"transform")||n&&"static"!==h(i,"position"))){var f=i.getBoundingClientRect();a-=f.top+parseInt(h(i,"border-top-width")),l-=f.left+parseInt(h(i,"border-left-width")),s=a+r.height,d=l+r.width;break}}while(i=i.parentNode);if(o&&e!==window){var p=m(i||e),v=p&&p.a,g=p&&p.d;p&&(s=(a/=g)+(u/=g),d=(l/=v)+(c/=v))}return{top:a,left:l,bottom:s,right:d,width:c,height:u}}}function O(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||t&&!r(e,t)||n++;return n}function a(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function f(e,t){h(e,"position","absolute"),h(e,"top",t.top),h(e,"left",t.left),h(e,"width",t.width),h(e,"height",t.height)}function x(e){h(e,"position",""),h(e,"top",""),h(e,"left",""),h(e,"width",""),h(e,"height","")}var N="Sortable"+(new Date).getTime();function i(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(e){var t,n,o;t=i,o=r[n=e],n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o})}return i}var l=[],y={mount:function(e){l.push(e)},pluginEvent:function(e,t,n){for(var o in this.eventCanceled=!1,l){if(t.options[l[o].pluginName]&&t[l[o].pluginName][e])t[l[o].pluginName][e](i({sortable:t},n))&&(this.eventCanceled=!0)}},initializePlugins:function(e,t){var n={};for(var o in l)e.options[l[o].pluginName]&&(n[l[o].pluginName]=new l[o](e,t));return n},getEventOptions:function(e,t){var n={};for(var o in l)l[o].eventOptions&&(n=i({},n,l[o].eventOptions(e,t)));return n}};function D(e){var t,n=e.sortable,o=e.rootEl,i=e.name,r=e.targetEl,a=e.cloneEl,l=e.toEl,s=e.fromEl,d=e.oldIndex,u=e.newIndex,c=e.oldDraggableIndex,f=e.newDraggableIndex,p=e.originalEvt,v=e.putSortable,g=(n=n||o[N]).options,h="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||w||C?(t=document.createEvent("Event")).initEvent(i,!0,!0):t=new CustomEvent(i,{bubbles:!0,cancelable:!0}),t.to=l||o,t.from=s||o,t.item=r||o,t.clone=a,t.oldIndex=d,t.newIndex=u,t.oldDraggableIndex=c,t.newDraggableIndex=f,t.originalEvent=p,t.pullMode=v?v.lastPutMode:void 0;var m=y.getEventOptions(i,n);for(var b in m)t[b]=m[b];o&&o.dispatchEvent(t),g[h]&&g[h].call(n,t)}var M,A,I,p,v,P=[],_=[],R=!1,j=!1,k=!1;function s(e,t){for(var n in _){var o=t.children[_[n].sortableIndex+(e?Number(n):0)];o?t.insertBefore(_[n],o):t.appendChild(_[n])}}function B(){for(var e=0;e<P.length;e++)P[e]!==I&&P[e].parentNode&&P[e].parentNode.removeChild(P[e])}return function(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?n(document,"pointerup",this._deselectMultiDrag):(n(document,"mouseup",this._deselectMultiDrag),n(document,"touchend",this._deselectMultiDrag)),this.options={selectedClass:"sortable-selected",setData:function(e,t){var n="";if(P.length)for(var o=0;o<P.length;o++)n+=(o?", ":"")+P[o].textContent;else n=t.textContent;e.setData("Text",n)}}}return e.prototype={setupClone:function(e){var t,n,o,i=e.sortable;if(P.length&&A===i.el){for(var r in P)_.push((t=P[r],o=n=void 0,n=window.Polymer,o=window.jQuery||window.Zepto,n&&n.dom?n.dom(t).cloneNode(!0):o?o(t).clone(!0)[0]:t.cloneNode(!0))),_[r].sortableIndex=P[r].sortableIndex,_[r].draggable=!1,_[r].style["will-change"]="",E(_[r],i.options.selectedClass,!1),P[r]===I&&E(_[r],i.options.chosenClass,!1);return i._hideClone(),!0}},clone:function(e){var t=e.sortable,n=e.rootEl,o=e.dispatchSortableEvent;if(!t.options.removeCloneOnHide&&P.length&&A===t.el)return s(!0,n),o("clone"),!0},showClone:function(e){var t=e.cloneNowShown;s(!1,e.rootEl);for(var n=0;n<_.length;n++)h(_[n],"display","");return t(),!(v=!1)},hideClone:function(e){var t=e.sortable,n=e.cloneNowHidden;for(var o in _)h(_[o],"display","none"),t.options.removeCloneOnHide&&_[o].parentNode&&_[o].parentNode.removeChild(_[o]);return n(),v=!0},delayEnded:function(e){var t=e.dragEl;I=t},dragStart:function(e){for(var t in e.sortable,!~P.indexOf(I)&&A&&A[N].multiDrag._deselectMultiDrag(),P)P[t].sortableIndex=O(P[t]);P=P.sort(function(e,t){return e.sortableIndex-t.sortableIndex}),k=!0},dragStarted:function(e){var t=e.sortable;if(t.options.sort&&(t.captureAnimationState(),t.options.animation)){for(var n in P)P[n]!==I&&h(P[n],"position","absolute");var o=S(I,!1,!0,!0);for(var i in P)P[i]!==I&&f(P[i],o);R=j=!0}t.animateAll(function(){if(R=j=!1,t.options.animation)for(var e in P)x(P[e]);t.options.sort&&B()})},dragOver:function(e){var t=e.target,n=e.completed;if(j&&~P.indexOf(t))return n(!1)},revert:function(e){var t=e.fromSortable,n=e.rootEl,o=e.sortable,i=e.dragRect;if(1<P.length){for(var r in P)o.addAnimationState({target:P[r],rect:j?S(P[r]):i}),x(P[r]),P[r].fromRect=i,t.removeAnimationState(P[r]);j=!1,function(e,t){for(var n in P){var o=t.children[P[n].sortableIndex+(e?Number(n):0)];o?t.insertBefore(P[n],o):t.appendChild(P[n])}}(!o.options.removeCloneOnHide,n)}},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,o=e.insertion,i=e.activeSortable,r=e.parentEl,a=e.putSortable,l=t.options;if(o){if(n&&i._hideClone(),R=!1,l.animation&&1<P.length&&(j||!n&&!i.options.sort&&!a)){var s=S(I,!1,!0,!0);for(var d in P)P[d]!==I&&(f(P[d],s),r.appendChild(P[d]));j=!0}if(!n)if(j||B(),1<P.length){var u=v;if(i._showClone(t),i.options.animation&&!v&&u)for(var c in _)i.addAnimationState({target:_[c],rect:p}),_[c].fromRect=p,_[c].thisAnimationDuration=null}else i._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,o=e.activeSortable;for(var i in P)P[i].thisAnimationDuration=null;if(o.options.animation&&!n&&o.options.multiDrag){p=a({},t);var r=m(I,!0);p.top-=r.f,p.left-=r.e}},dragOverAnimationComplete:function(){j&&(j=!1,B())},drop:function(e){var t=e.originalEvent,n=e.rootEl,o=e.parentEl,i=e.sortable,r=e.putSortable,a=r||this.sortable;if(t){i.el;var l=i.options,s=o.children;if(!k&&l.multiDrag)if(E(I,l.selectedClass,!~P.indexOf(I)),~P.indexOf(I))P.splice(P.indexOf(I),1),M=null,D({sortable:i,rootEl:n,name:"deselect",targetEl:I,originalEvt:t,eventOptions:{items:P,clones:_}});else{if(P.push(I),D({sortable:i,rootEl:n,name:"select",targetEl:I,originalEvt:t,eventOptions:{items:P,clones:_}}),t.shiftKey&&M&&i.el.contains(M)){var d,u,c=O(M),f=O(I);if(~c&&~f&&c!==f)for(d=c<f?(u=c,f):(u=f,c+1);u<d;u++)~P.indexOf(s[u])||(E(s[u],l.selectedClass,!0),P.push(s[u]),D({sortable:i,rootEl:n,name:"select",targetEl:s[u],originalEvt:t,eventOptions:{items:P,clones:_}}))}else M=I;A=o}if(k&&l.multiDrag&&P.length){if((o[N].options.sort||o!==n)&&1<P.length){var p=S(I),v=O(I,":not(."+Sortable.active.options.selectedClass+")");if(!R&&l.animation&&(I.thisAnimationDuration=null),a.captureAnimationState(),!R){if(l.animation)for(var g in I.fromRect=p,P)if(P[g].thisAnimationDuration=null,P[g]!==I){var h=j?S(P[g]):p;P[g].fromRect=h,a.addAnimationState({target:P[g],rect:h})}for(var m in B(),P)s[v]?o.insertBefore(P[m],s[v]):o.appendChild(P[m]),v++}for(var b in P)x(P[b]);a.animateAll()}A=o}if(n===o||r&&"clone"!==r.lastPutMode)for(var w in _)_[w].parentNode&&_[w].parentNode.removeChild(_[w]);_.length=0}},nulling:function(){k=!1,_.length=0},destroy:function(){this._deselectMultiDrag()},_deselectMultiDrag:function(e){if(!k&&A===this.sortable.el&&!(e&&function(e,t,n,o){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&r(e,t):r(e,t))||o&&e===n)return e;if(e===n)break}while(e=(i=e).host&&i!==document&&i.host.nodeType?i.host:i.parentNode)}var i;return null}(e.target,this.sortable.options.draggable,this.sortable.el,!1)||e&&0!==e.button)){for(var t=0;t<P.length;t++)E(P[t],this.sortable.options.selectedClass,!1),D({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:P[t],originalEvt:e,eventOptions:{items:P,clones:_}});P=[]}}},a(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[N];t&&t.options.multiDrag&&!~P.indexOf(e)&&(A&&A!==e.parentNode&&(A[N].multiDrag._deselectMultiDrag(),A=e.parentNode),E(e,t.options.selectedClass,!0),P.push(e))},deselect:function(e){var t=e.parentNode[N],n=P.indexOf(e);t&&t.options.multiDrag&&~n&&(E(e,t.options.selectedClass,!1),P.splice(n,1))}},eventOptions:function(){return{items:P,clones:_}}})}});